# 虚拟机类加载机制

虚拟机是如何加载class文件呢？
简单来说，虚拟机把class文件加载到内存，并对数据进行验证、转换解析和初始化，最终可以被虚拟机使用

## 类加载的时机

加载、验证、准备、解析、初始化、（使用、卸载）  
加载、验证、准备、初始化是依次开始的>

### 初始化的主动引用和被动引用

主动引用：有且只有5种必须对类进行初始化

* 遇到new, getstatic, putstatic, invokestatic这4条字节码指令时
* 使用java.lang.reflct包方法对类进行反射调用
* 初始化一个类，父类还没有初始化
* 用户需要指定一个执行的主类，虚拟机先初始化主类
* java.lang.invoke.MethodHandle实例最后的解析结果REF_getStatic, REF_putStatic, REF_invokeStatic的方法句柄，并且句柄对应的类没有进行初始化

被动引用：除主动引用外，所有引用类的方法都不会出发初始化
